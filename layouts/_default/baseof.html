{{- if lt hugo.Version "0.146.0" }}
{{- errorf "=> hugo v0.146.0 or greater is required for hugo-PaperMod to build " }}
{{- end -}}

<!DOCTYPE html>
{{- $theme := site.Params.defaultTheme | default "auto" }}
{{- if eq $theme "dark" }}
<html lang="{{ site.Language }}" dir="{{ .Language.LanguageDirection | default "auto" }}" data-theme="dark">
{{- else if eq $theme "light" }}
<html lang="{{ site.Language }}" dir="{{ .Language.LanguageDirection | default "auto" }}" data-theme="light">
{{- else }}
<html lang="{{ site.Language }}" dir="{{ .Language.LanguageDirection | default "auto" }}" data-theme="auto">
{{- end }}

<head>
    {{- partial "head.html" . }}
    {{- /* Load search modal script */ -}}
    {{- $fusejs := resources.Get "js/fuse.basic.min.js" }}
    {{- $kbdHint := resources.Get "js/kbd-hint.js" }}
    {{- $themeFix := resources.Get "js/theme-toggle-fix.js" }}
    {{- $searchModal := resources.Get "js/search-modal.js" | js.Build (dict "params" (dict "fuseOpts" site.Params.fuseOpts)) | resources.Minify }}
    {{- $searchScript := (slice $fusejs $kbdHint $themeFix $searchModal) | resources.Concat "assets/js/search-modal-bundle.js" }}
    {{- if not site.Params.assets.disableFingerprinting }}
    {{- $searchScript = $searchScript | fingerprint }}
    <script defer crossorigin="anonymous" src="{{ $searchScript.RelPermalink }}" integrity="{{ $searchScript.Data.Integrity }}"></script>
    {{- else }}
    <script defer crossorigin="anonymous" src="{{ $searchScript.RelPermalink }}"></script>
    {{- end }}
</head>

{{- $isDocsPage := strings.HasPrefix .RelPermalink "/docs/" }}
{{- if (or (ne .Kind `page` ) (eq .Layout `archives`) (eq .Layout `search`)) }}
<body class="list{{ if $isDocsPage }} docs-page{{ end }}" id="top">
{{- else }}
<body class="{{ if $isDocsPage }}docs-page{{ end }}" id="top">
{{- end }}
    {{ partialCached "header.html" . .Page -}}
    <div class="page-wrapper{{ if $isDocsPage }} with-sidebar{{ end }}">
        {{- if $isDocsPage }}
        {{- partial "docs_sidebar.html" . }}
        {{- end }}
        <main class="main{{ if $isDocsPage }} with-sidebar{{ end }}">
            {{- block "main" . }}{{ end }}
        </main>
    </div>
    {{ partialCached "footer.html" . .Layout .Kind (.Param "hideFooter") (.Param "ShowCodeCopyButtons") -}}
</body>

</html>
